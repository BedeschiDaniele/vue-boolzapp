<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.9.7/dayjs.min.js" integrity="sha512-kZ+x2gdehn6OZMWZSp3Vt5R+v9hQTYEATQwaUfWquhxbvNVAy6IRtYs7asdyxKUTqG0I5ZqBqnzcBrpnHJCAGw==" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <title>Whatsapp</title>
  </head>
  <body>
    <div class="container">
    <!-- Panel left -->
      <div class="panel-left">
        <div class="profile">
          <div class="user">
            <img id="profile-avatar" src="https://cdn1.iconfinder.com/data/icons/avatars-55/100/avatar_profile_user_music_headphones_shirt_cool-512.png" alt="profile-avatar">
            <span>Daniele</span>
          </div>
          <div class="icons">
            <i class="fas fa-circle-notch"></i>
            <i class="fas fa-comment-alt"></i>
            <i class="fas fa-ellipsis-v"></i>
          </div>
        </div>
        <div class="notifications">
          <div id="bell">
            <i class="fas fa-bell-slash"></i>
          </div>
          <div id="text-notifications">
            <p>Ricevi notifiche di nuovi mesaggi</p>
            <span><u>Attiva notifiche desktop</u></span>
          </div>

        </div>
      <!-- Search -->
        <div class="search">
          <div class="icon-search">
            <i class="fas fa-search"></i>
          </div>
          <div class="input-search">
            <input v-model="searchcon" @keypress.13="searchcontact" type="text" placeholder="Cerca o inizia una nuova chat">
          </div>
        </div>
      <!-- /Search -->
      <!-- Friend -->
        <div class="friend">
          <ul>
            <li v-for="(item,index) in contacts" v-if="item.visible" @click="showchat(index)" :class="(index == indexChat) ? 'active' : '' "  >
              <img :src="item.avatar" :alt="item.name">
              <div class="name-user">
                <div id="set-date">
                  <span id="format-text">{{item.name}}</span>
                  <span id="format-text-date">{{item.messages[(item.messages.length) - 1].date}}</span>
                </div>

                <p id="p-color">{{item.messages[(item.messages.length) - 1].text}}</p>
              </div>
            </li>
          </ul>
        </div>
      <!-- /Friend -->
      </div>
    <!-- /Panel left -->
    <!-- /Panel right -->
      <div class="panel-right">
      <!-- Chat up -->
        <div class="chat">
          <div class="user-chat">
            <img :src="contacts[indexChat].avatar" :alt="contacts[indexChat].name" id="profile-avatar-chat">
            <div class="name-user">
              <p>{{contacts[indexChat].name}}</p>
              <p>Ultimo accesso: {{access}} </p>
            </div>
          </div>
          <div class="icons">
            <i class="fas fa-search"></i>
            <i class="fas fa-paperclip"></i>
            <i class="fas fa-ellipsis-v"></i>
          </div>
        </div>
        <!-- Chat send and received -->
        <div class="container-message">
          <div v-for="element in contacts[indexChat].messages" :class=" (element.status=='sent') ? 'message-send':'message-received' ">
              <span>{{element.text}}</span>
              <div class="date">
                 <span>{{element.date}}</span>
              </div>
            </div>
        </div>

      <!-- Write message -->
        <div class="input-text">
          <div class="bar">
            <div class="emoticon">
              <i class="far fa-grin-alt"></i>
            </div>
            <div class="set-message">
              <input v-model="message" @keypress.13="addmessage" type="text" placeholder="Scrivi un messaggio">
            </div>
            <div class="microphone">
              <i class="fas fa-microphone"></i>
            </div>
          </div>
        </div>
      </div>
    <!-- Pannello di destra  -->
    </div>
    <script src="js/script.js" charset="utf-8"></script>
  </body>
</html>
